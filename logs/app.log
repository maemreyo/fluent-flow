vocabulary-analysis-service.ts:103 AI vocabulary analysis failed: Error: Vocabulary analysis failed: Malformed JSON in AI response - no matching closing brace
    at AIService.analyzeVocabulary (ai-service.ts:415:5)
    at async VocabularyAnalysisService.analyzeVocabulary (vocabulary-analysis-service.ts:74:14)
    at async handleAnalyzeVocabulary (loop-card.tsx:147:7)
loop-card.tsx:159 Failed to analyze vocabulary: Error: Vocabulary analysis failed: Vocabulary analysis failed: Malformed JSON in AI response - no matching closing brace
    at VocabularyAnalysisService.analyzeVocabulary (vocabulary-analysis-service.ts:104:5)
    at async handleAnalyzeVocabulary (loop-card.tsx:147:7)
  

{
    "candidates": [
        {
            "content": {
                "parts": [
                    {
                        "text": "```json\n{\n  \"words\": [\n    {\n      \"word\": \"scrutinizing\",\n      \"partOfSpeech\": \"verb\",\n      \"pronunciation\": \"/ˈskruːtɪnaɪzɪŋ/\",\n      \"definition\": \"Examining or inspecting closely and thoroughly.\",\n      \"definitionVi\": \"Kiểm tra hoặc xem xét kỹ lưỡng và thấu đáo.\",\n      \"synonyms\": [\"examining\", \"inspecting\", \"analyzing\"],\n      \"antonyms\": [\"ignoring\", \"neglecting\"],\n      \"example\": \"She spent hours scrutinizing the details of the contract.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"self-awareness\",\n      \"partOfSpeech\": \"noun\",\n      \"pronunciation\": \"/ˌself əˈwɛərnəs/\",\n      \"definition\": \"Conscious knowledge of one's own character, feelings, motives, and desires.\",\n      \"definitionVi\": \"Sự nhận thức về bản thân, bao gồm tính cách, cảm xúc, động cơ và mong muốn của chính mình.\",\n      \"synonyms\": [\"introspection\", \"self-knowledge\", \"consciousness\"],\n      \"antonyms\": [\"obliviousness\", \"ignorance\"],\n      \"example\": \"Developing self-awareness is crucial for personal growth.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 18\n    },\n    {\n      \"word\": \"quantitatively\",\n      \"partOfSpeech\": \"adverb\",\n      \"pronunciation\": \"/ˌkwɒntɪˈteɪtɪvli/\",\n      \"definition\": \"In a way that relates to or measured by the quantity of something rather than its quality.\",\n      \"definitionVi\": \"Một cách liên quan đến hoặc được đo lường bằng số lượng của một thứ gì đó thay vì chất lượng của nó.\",\n      \"synonyms\": [\"numerically\", \"statistically\", \"measurably\"],\n      \"antonyms\": [\"qualitatively\"],\n      \"example\": \"The study quantitatively analyzed the impact of the new policy.\",\n      \"difficulty\": \"advanced\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"dramatic\",\n      \"partOfSpeech\": \"adjective\",\n      \"pronunciation\": \"/drəˈmætɪk/\",\n      \"definition\": \"Sudden and noticeable; striking.\",\n      \"definitionVi\": \"Đột ngột và đáng chú ý; ấn tượng.\",\n      \"synonyms\": [\"striking\", \"significant\", \"remarkable\"],\n      \"antonyms\": [\"unremarkable\", \"minor\"],\n      \"example\": \"She made dramatic improvements in her performance.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 2\n    },\n    {\n      \"word\": \"ground-breaking\",\n      \"partOfSpeech\": \"adjective\",\n      \"pronunciation\": \"/ˈɡraʊndˌbreɪkɪŋ/\",\n      \"definition\": \"Innovative; pioneering.\",\n      \"definitionVi\": \"Đổi mới; tiên phong.\",\n      \"synonyms\": [\"innovative\", \"revolutionary\", \"pioneering\"],\n      \"antonyms\": [\"conventional\", \"traditional\"],\n      \"example\": \"The discovery was truly ground-breaking.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"revelation\",\n      \"partOfSpeech\": \"noun\",\n      \"pronunciation\": \"/ˌrevəˈleɪʃən/\",\n      \"definition\": \"A surprising and previously unknown fact, especially one made known in a dramatic way.\",\n      \"definitionVi\": \"Một sự thật đáng ngạc nhiên và chưa từng được biết đến, đặc biệt là một sự thật được tiết lộ một cách ấn tượng.\",\n      \"synonyms\": [\"disclosure\", \"discovery\", \"unveiling\"],\n      \"antonyms\": [\"concealment\", \"hiding\"],\n      \"example\": \"The documentary offered a revelation about the politician's past.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"reflect\",\n      \"partOfSpeech\": \"verb\",\n      \"pronunciation\": \"/rɪˈflekt/\",\n      \"definition\": \"To think deeply or carefully about.\",\n      \"definitionVi\": \"Suy nghĩ sâu sắc hoặc cẩn thận về.\",\n      \"synonyms\": [\"ponder\", \"contemplate\", \"consider\"],\n      \"antonyms\": [\"ignore\", \"disregard\"],\n      \"example\": \"Take some time to reflect on your goals.\",\n      \"difficulty\": \"beginner\",\n      \"frequency\": 3\n    },\n    {\n      \"word\": \"shatter\",\n      \"partOfSpeech\": \"verb\",\n      \"pronunciation\": \"/ˈʃætər/\",\n      \"definition\": \"Break suddenly and violently into pieces; to destroy or ruin.\",\n      \"definitionVi\": \"Vỡ đột ngột và dữ dội thành từng mảnh; phá hủy hoặc làm hỏng.\",\n      \"synonyms\": [\"smash\", \"break\", \"destroy\"],\n      \"antonyms\": [\"mend\", \"repair\", \"unite\"],\n      \"example\": \"The vase fell and shattered on the floor.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"widely held\",\n      \"partOfSpeech\": \"adjective\",\n      \"pronunciation\": \"/ˈwaɪdli hɛld/\",\n      \"definition\": \"Accepted or believed by many people.\",\n      \"definitionVi\": \"Được nhiều người chấp nhận hoặc tin tưởng.\",\n      \"synonyms\": [\"common\", \"popular\", \"accepted\"],\n      \"antonyms\": [\"uncommon\", \"unpopular\"],\n      \"example\": \"It's a widely held belief that practice makes perfect.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"comfort\",\n      \"partOfSpeech\": \"noun\",\n      \"pronunciation\": \"/ˈkʌmfərt/\",\n      \"definition\": \"A state of physical ease and freedom from pain or constraint.\",\n      \"definitionVi\": \"Trạng thái dễ chịu về thể chất và không bị đau đớn hoặc gò bó.\",\n      \"synonyms\": [\"ease\", \"solace\", \"relief\"],\n      \"antonyms\": [\"discomfort\", \"distress\"],\n      \"example\": \"There's a comfort in knowing yourself.\",\n      \"difficulty\": \"beginner\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"fulfilled\",\n      \"partOfSpeech\": \"adjective\",\n      \"pronunciation\": \"/fʊlˈfɪld/\",\n      \"definition\": \"Satisfied or happy because of fully developing one's abilities or character.\",\n      \"definitionVi\": \"Hài lòng hoặc hạnh phúc vì đã phát huy đầy đủ khả năng hoặc tính cách của mình.\",\n      \"synonyms\": [\"satisfied\", \"content\", \" gratified\"],\n      \"antonyms\": [\"unfulfilled\", \"dissatisfied\"],\n      \"example\": \"She felt fulfilled after completing the challenging project.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"promotable\",\n      \"partOfSpeech\": \"adjective\",\n      \"pronunciation\": \"/prəˈmoʊtəbəl/\",\n      \"definition\": \"Likely to be promoted.\",\n      \"definitionVi\": \"Có khả năng được thăng chức.\",\n      \"synonyms\": [\"advancable\", \"eligible for promotion\"],\n      \"antonyms\": [\"unpromotable\"],\n      \"example\": \"He's a highly promotable employee with excellent skills.\",\n      \"difficulty\": \"advanced\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"profitable\",\n      \"partOfSpeech\": \"adjective\",\n      \"pronunciation\": \"/ˈprɒfɪtəbəl/\",\n      \"definition\": \"Yielding profit or financial gain.\",\n      \"definitionVi\": \"Mang lại lợi nhuận hoặc lợi ích tài chính.\",\n      \"synonyms\": [\"lucrative\", \"gainful\", \"remunerative\"],\n      \"antonyms\": [\"unprofitable\", \"loss-making\"],\n      \"example\": \"The company is focused on becoming more profitable.\",\n      \"difficulty\": \"intermediate\",\n      \"frequency\": 1\n    },\n    {\n      \"word\": \"excavate\",\n      \"partOfSpeech\": \"verb\",\n      \"pronunciation\": \"/ˈɛkstəveɪt/\",\n      \"definition\": \"To dig out material from the ground; to unearth.\",\n      \"definitionVi\": \"Đào vật liệu từ lòng đất; khai quật.\",\n      \"synonyms\": [\"dig\", \"unearth\", \"extract\"],\n      \"antonyms\": [\"bury\", \"cover\"],\n      \"example\": \"Archaeologists are trying to excavate the ancient ruins.\",\n      \"difficulty\": \"advanced\",\n      \""
                    }
                ],
                "role": "model"
            },
            "finishReason": "MAX_TOKENS",
            "index": 0
        }
    ],
    "usageMetadata": {
        "promptTokenCount": 3389,
        "candidatesTokenCount": 2000,
        "totalTokenCount": 5389,
        "cachedContentTokenCount": 3064,
        "promptTokensDetails": [
            {
                "modality": "TEXT",
                "tokenCount": 3389
            }
        ],
        "cacheTokensDetails": [
            {
                "modality": "TEXT",
                "tokenCount": 3064
            }
        ]
    },
    "modelVersion": "gemini-2.5-flash-lite",
    "responseId": "THaxaJ-KN7X7qtsPptrt0QE"
}